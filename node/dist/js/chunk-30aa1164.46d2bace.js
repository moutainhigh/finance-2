(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-30aa1164"],{"1feb":function(e,r,o){"use strict";o.r(r);var t=function(){var e=this,r=this,o=r.$createElement,t=r._self._c||o;return t("div",{class:r.isForm?"loginx":"login"},[r.isForm?r._e():t("div",{staticClass:"login-box"},[t("img",{staticClass:"reg-img",attrs:{src:"/image/home/login.png"}}),t("div",{staticClass:"input-box"},[t("div",{staticClass:"l-title"},[t("div",[r._v("注册")]),t("img",{staticClass:"close",attrs:{src:"/image/home/close.png"},on:{click:function(e){return r.$emit("close")}}})]),t("div",{staticClass:"l-input"},[t("div",[r._v("* 企业名称")]),t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:r.regForm.companyName,expression:"regForm.companyName"}],attrs:{type:"text",placeholder:"请输入企业工商名称"},domProps:{value:r.regForm.companyName},on:{input:function(e){e.target.composing||r.$set(r.regForm,"companyName",e.target.value)}}})])]),t("div",{staticClass:"l-input"},[t("div",[r._v("* 统一社会信用代码")]),t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:r.regForm.creditCode,expression:"regForm.creditCode"}],ref:"rcreditCode",attrs:{type:"text",placeholder:"请输入统一社会信用代码"},domProps:{value:r.regForm.creditCode},on:{blur:function(e){return r.validateCreditCode()},input:function(e){e.target.composing||r.$set(r.regForm,"creditCode",e.target.value)}}})])]),t("div",{staticClass:"l-input"},[t("div",[r._v("* 联系人")]),t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:r.regForm.userName,expression:"regForm.userName"}],attrs:{type:"text",placeholder:"请输入联系人"},domProps:{value:r.regForm.userName},on:{input:function(e){e.target.composing||r.$set(r.regForm,"userName",e.target.value)}}})])]),t("div",{staticClass:"l-input"},[t("div",[r._v("* 联系电话")]),t("div",[t("input",{directives:[{name:"model",rawName:"v-model.number",value:r.regForm.mobile,expression:"regForm.mobile",modifiers:{number:!0}}],ref:"rmobile",attrs:{type:"text",placeholder:"请输入联系人电话"},domProps:{value:r.regForm.mobile},on:{blur:[r.validatePhone,function(e){return r.$forceUpdate()}],input:function(e){e.target.composing||r.$set(r.regForm,"mobile",r._n(e.target.value))}}})])]),t("div",{staticClass:"l-input"},[t("div",[r._v("* 密码")]),t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:r.regForm.password,expression:"regForm.password"}],ref:"rpass",attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:r.regForm.password},on:{blur:function(){e.regForm.password&&8==String(e.regForm.password).length||e.$message.error("请输入8位密码，包含字母、数字")},input:function(e){e.target.composing||r.$set(r.regForm,"password",e.target.value)}}})])]),t("div",{staticClass:"l-input"},[t("div",[r._v("* 确认密码")]),t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:r.regForm.repassword,expression:"regForm.repassword"}],attrs:{type:"password",placeholder:"请确认密码"},domProps:{value:r.regForm.repassword},on:{blur:function(){e.regForm.repassword&&8==String(e.regForm.password).length&&e.regForm.repassword===e.regForm.password||e.$message.error("请输入8位正确的确认密码，包含字母、数字")},input:function(e){e.target.composing||r.$set(r.regForm,"repassword",e.target.value)}}})])]),t("div",{staticClass:"l-input l-input-code"},[t("div",[r._v("* 验证码")]),t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:r.regForm.code,expression:"regForm.code"}],attrs:{type:"text",placeholder:"请输入验证码"},domProps:{value:r.regForm.code},on:{input:function(e){e.target.composing||r.$set(r.regForm,"code",e.target.value)}}}),t("div",{staticClass:"code",on:{click:r.sendSms}},[r._v(r._s(r.codeStr))])])]),t("div",{staticClass:"l-btns"},[t("div",{staticClass:"l-btn",on:{click:r.doReg}},[r._v("确认注册")]),t("div",{staticClass:"l-btn",on:{click:function(e){return r.$emit("to-login")}}},[r._v("返回登录")])])])]),r.isForm?t("div",{staticClass:"login-box",staticStyle:{background:"none","min-height":"27vw",height:"auto"}},[t("a-card",{staticStyle:{width:"31vw","border-radius":"1vw"},attrs:{title:""}},[t("a",{attrs:{slot:"extra",href:"#"},slot:"extra"},[t("img",{staticClass:"close",staticStyle:{padding:"0px",width:"27px"},attrs:{src:"/image/home/close.png"},on:{click:function(e){return r.$emit("close")}}})]),t("a-form-model",{ref:"ruleForm",attrs:{model:r.regForm,rules:r.rules,"label-col":{span:6},"wrapper-col":{span:16}}},[t("a-form-model-item",{ref:"companyName",attrs:{label:"企业名称",prop:"companyName"}},[t("a-input",{on:{blur:function(){r.$refs.companyName.onFieldBlur()}},model:{value:r.regForm.companyName,callback:function(e){r.$set(r.regForm,"companyName",e)},expression:"regForm.companyName"}})],1),t("a-form-model-item",{ref:"creditCode",attrs:{label:"统一社会信用代码",prop:"creditCode"}},[t("a-input",{on:{blur:function(){r.$refs.creditCode.onFieldBlur()}},model:{value:r.regForm.creditCode,callback:function(e){r.$set(r.regForm,"creditCode",e)},expression:"regForm.creditCode"}})],1),t("a-form-model-item",{ref:"userName",attrs:{label:"联系人",prop:"userName"}},[t("a-input",{on:{blur:function(){r.$refs.userName.onFieldBlur()}},model:{value:r.regForm.userName,callback:function(e){r.$set(r.regForm,"userName",e)},expression:"regForm.userName"}})],1),t("a-form-model-item",{ref:"mobile",attrs:{label:"联系电话",prop:"mobile"}},[t("a-input",{on:{blur:function(){r.$refs.mobile.onFieldBlur()}},model:{value:r.regForm.mobile,callback:function(e){r.$set(r.regForm,"mobile",e)},expression:"regForm.mobile"}})],1),t("a-form-model-item",{ref:"password",attrs:{label:"密码",prop:"password"}},[t("a-input",{attrs:{type:"password"},on:{blur:function(){r.$refs.password.onFieldBlur()}},model:{value:r.regForm.password,callback:function(e){r.$set(r.regForm,"password",e)},expression:"regForm.password"}})],1),t("a-form-model-item",{ref:"repassword",attrs:{label:"确认密码",prop:"repassword"}},[t("a-input",{attrs:{type:"password"},on:{blur:function(){r.$refs.repassword.onFieldBlur()}},model:{value:r.regForm.repassword,callback:function(e){r.$set(r.regForm,"repassword",e)},expression:"regForm.repassword"}})],1),t("a-form-model-item",{ref:"code",attrs:{label:"验证码",prop:"code"}},[t("a-input",{on:{blur:function(){r.$refs.code.onFieldBlur()}},model:{value:r.regForm.code,callback:function(e){r.$set(r.regForm,"code",e)},expression:"regForm.code"}},[t("a-button",{attrs:{slot:"suffix",type:"link"},on:{click:r.sendSms},slot:"suffix"},[r._v(r._s(r.codeStr))])],1)],1),t("a-form-model-item",{attrs:{"wrapper-col":{span:20,offset:2}}},[t("a-button",{staticStyle:{width:"45%"},attrs:{type:"primary",size:"large"},on:{click:r.doReg}},[r._v(" 确认注册 ")]),t("a-button",{staticStyle:{"margin-left":"10%",width:"45%"},attrs:{type:"info",size:"large"},on:{click:function(e){return r.$emit("to-login")}}},[r._v(" 返回登录 ")])],1)],1)],1)],1):r._e()])},s=[],i=o("51fe"),a={name:"Reg",props:{isForm:{type:Boolean,default:!1}},data:function(){var e=this,r=function(r,o,t){""===o?t(new Error("请输入确认密码")):o!==e.regForm.password?t(new Error("密码和确认密码不一致")):8!=String(o).length?t(new Error("请输入8位密码，包含字母、数字")):t()},o=function(e,r,o){""===r?o(new Error("请输入统一社会信用代码")):(new i["b"]).verify(r)?o(new Error("请输入正确的统一社会信用代码")):o()};return{codeStr:"获取验证码",time:0,regForm:{userName:"",mobile:"",password:"",companyName:"",creditCode:"",code:"",repassword:""},rules:{userName:[{required:!0,message:"请输入联系人",trigger:"blur"}],mobile:[{required:!0,message:"请输入联系人电话",trigger:"blur"},{min:11,max:11,message:"请输入正确联系人电话",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:8,max:8,message:"请输入8位密码，包含字母、数字",trigger:"blur"}],repassword:[{required:!0,message:"请输入确认密码",trigger:"blur"},{validator:r,trigger:"blur"}],companyName:[{required:!0,message:"请输入企业工商名称",trigger:"blur"}],creditCode:[{required:!0,message:"请输入统一社会信用代码",trigger:"blur"},{validator:o,trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"},{min:6,max:6,message:"请输入正确的验证码",trigger:"blur"}]}}},methods:{validateCreditCode:function(){var e=new i["b"];if(!e.verify(this.regForm.creditCode))return this.$message.error("请输入正确的统一社会信用代码"),void this.$refs.rcreditCode.focus()},validatePhone:function(){if(!/^1[3|4|5|6|7|8|9][0-9]{9}/.test(this.regForm.mobile))return this.$message.error("请输入正确的联系人电话"),void this.$refs.rmobile.focus()},doReg:function(){var e=this;if(this.isForm)this.$refs.ruleForm.validate((function(r){if(!r)return!1;var o=Object.assign({},e.regForm);delete o.code,delete o.repassword,Object(i["a"])("/finance/userInfo/verifySmsCode",{mobile:o.mobile,smsCode:e.regForm.code,usageType:0}).then((function(r){1==r.content.smsCodeValid?e.reg(o):e.$message.error("验证码已过期")})).catch((function(r){return e.$message.error(r)}))}));else{if(!this.regForm.companyName)return void this.$message.error("请输入企业工商名称");if(!this.regForm.creditCode)return void this.$message.error("请输入统一社会信用代码");if(!this.regForm.userName)return void this.$message.error("请输入联系人");if(!this.regForm.mobile||!/^1[3-9]{1}[0-9]{9}/.test(this.regForm.mobile))return void this.$message.error("请输入正确的联系人电话");if(!this.regForm.password||8!=String(this.regForm.password).length)return void this.$message.error("请输入8位密码，包含字母、数字");if(!this.regForm.repassword||8!=String(this.regForm.password).length||this.regForm.repassword!==this.regForm.password)return void this.$message.error("请输入8位正确的确认密码，包含字母、数字");if(!this.regForm.code||6!=String(this.regForm.code).length)return void this.$message.error("请输入正确的验证码");var r=Object.assign({},this.regForm);delete r.code,delete r.repassword,Object(i["a"])("/finance/userInfo/verifySmsCode",{mobile:r.mobile,smsCode:this.regForm.code,usageType:0}).then((function(o){1==o.content.smsCodeValid?e.reg(r):e.$message.error("验证码已过期")})).catch((function(r){return e.$message.error(r)}))}},reg:function(e){var r=this;this.$http.post("/finance/userInfo/register",e).then((function(e){0==e.data.code?(r.$message.success("注册成功"),r.$emit("do-reg",r.regForm)):r.$message.success(e.data.msg)}))},sendSms:function(){var e=this;if(this.isForm){if(!this.regForm.mobile)return void this.$refs.mobile.onFieldBlur();if(this.regForm.mobile&&!/^1[3-9]{1}[0-9]{9}/.test(this.regForm.mobile))return void this.$refs.mobile.onFieldBlur()}else{if(!this.regForm.mobile)return void this.$message.error("请输入联系人电话");if(this.regForm.mobile&&!/^1[3-9]{1}[0-9]{9}/.test(this.regForm.mobile))return void this.$message.error("请输入正确联系人电话")}0==this.time&&Object(i["g"])("/finance/userInfo/sendSmsCode",{mobile:this.regForm.mobile,usageType:0}).then((function(r){e.time=60,e.codeStr=e.time+"s";var o=setInterval((function(){if(0==e.time)return e.codeStr="获取验证码",void clearInterval(o);e.time--,e.codeStr=e.time+"s"}),1e3)})).catch((function(r){e.$message.error(r)}))}}},n=a,m=(o("28e7"),o("2877")),l=Object(m["a"])(n,t,s,!1,null,"417b5c7a",null);r["default"]=l.exports},"28e7":function(e,r,o){"use strict";var t=o("ee5d"),s=o.n(t);s.a},ee5d:function(e,r,o){}}]);