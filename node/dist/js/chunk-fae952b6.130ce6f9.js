(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fae952b6"],{"5b15":function(e,r,s){"use strict";var o=s("97ce"),t=s.n(o);t.a},"97ce":function(e,r,s){},d755:function(e,r,s){"use strict";s.r(r);var o=function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",{staticClass:"login"},[e.isForm?e._e():s("div",{staticClass:"login-box"},[s("img",{staticClass:"reg-img",attrs:{src:"/image/home/login.png"}}),s("div",{staticClass:"input-box"},[s("div",{staticClass:"l-title"},[s("div",[e._v("找回密码")]),s("img",{staticClass:"close",attrs:{src:"/image/home/close.png"},on:{click:function(r){return e.$emit("close")}}})]),s("div",{staticClass:"l-input"},[s("div",[e._v("* 联系电话")]),s("div",[s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.regForm.mobile,expression:"regForm.mobile",modifiers:{number:!0}}],attrs:{type:"text",placeholder:"请输入联系人电话"},domProps:{value:e.regForm.mobile},on:{input:function(r){r.target.composing||e.$set(e.regForm,"mobile",e._n(r.target.value))},blur:function(r){return e.$forceUpdate()}}})])]),s("div",{staticClass:"l-input l-input-code"},[s("div",[e._v("* 验证码")]),s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.regForm.code,expression:"regForm.code"}],attrs:{type:"text",placeholder:"请输入验证码"},domProps:{value:e.regForm.code},on:{input:function(r){r.target.composing||e.$set(e.regForm,"code",r.target.value)}}}),s("div",{staticClass:"code",on:{click:e.sendSms}},[e._v(e._s(e.codeStr))])])]),s("div",{staticClass:"l-input"},[s("div",[e._v("* 新密码")]),s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.regForm.password,expression:"regForm.password"}],attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:e.regForm.password},on:{input:function(r){r.target.composing||e.$set(e.regForm,"password",r.target.value)}}})])]),s("div",{staticClass:"l-input"},[s("div",[e._v("* 确认新密码")]),s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.regForm.repassword,expression:"regForm.repassword"}],attrs:{type:"password",placeholder:"请确认密码"},domProps:{value:e.regForm.repassword},on:{input:function(r){r.target.composing||e.$set(e.regForm,"repassword",r.target.value)}}})])]),s("div",{staticClass:"l-btns"},[s("div",{staticClass:"l-btn",on:{click:function(r){return e.$emit("to-login")}}},[e._v("返回登录")]),s("div",{staticClass:"l-btn",on:{click:e.doReg}},[e._v("重设密码")])])])]),e.isForm?s("div",{staticClass:"login-box",staticStyle:{background:"none"}},[s("a-card",{staticStyle:{width:"31vw","border-radius":"1vw"},attrs:{title:"重设密码"}},[s("a",{attrs:{slot:"extra",href:"#"},slot:"extra"},[s("img",{staticClass:"close",staticStyle:{padding:"0px",width:"27px"},attrs:{src:"/image/home/close.png"},on:{click:function(r){return e.$emit("close")}}})]),s("a-form-model",{ref:"ruleForm",attrs:{model:e.regForm,rules:e.rules,"label-col":{span:6},"wrapper-col":{span:16}}},[s("a-form-model-item",{ref:"mobile",attrs:{label:"联系电话",prop:"mobile"}},[s("a-input",{on:{blur:function(){e.$refs.mobile.onFieldBlur()}},model:{value:e.regForm.mobile,callback:function(r){e.$set(e.regForm,"mobile",r)},expression:"regForm.mobile"}})],1),s("a-form-model-item",{ref:"code",attrs:{label:"验证码",prop:"code"}},[s("a-input",{on:{blur:function(){e.$refs.code.onFieldBlur()}},model:{value:e.regForm.code,callback:function(r){e.$set(e.regForm,"code",r)},expression:"regForm.code"}},[s("a-button",{attrs:{slot:"suffix",type:"link"},on:{click:e.sendSms},slot:"suffix"},[e._v(e._s(e.codeStr))])],1)],1),s("a-form-model-item",{ref:"password",attrs:{label:"新密码",prop:"password"}},[s("a-input",{attrs:{type:"password"},on:{blur:function(){e.$refs.password.onFieldBlur()}},model:{value:e.regForm.password,callback:function(r){e.$set(e.regForm,"password",r)},expression:"regForm.password"}})],1),s("a-form-model-item",{ref:"repassword",attrs:{label:"确认新密码",prop:"repassword"}},[s("a-input",{attrs:{type:"password"},on:{blur:function(){e.$refs.repassword.onFieldBlur()}},model:{value:e.regForm.repassword,callback:function(r){e.$set(e.regForm,"repassword",r)},expression:"regForm.repassword"}})],1),s("a-form-model-item",{attrs:{"wrapper-col":{span:20,offset:2}}},[s("a-button",{staticStyle:{width:"45%"},attrs:{type:"info",size:"large"},on:{click:function(r){return e.$emit("to-login")}}},[e._v(" 返回登录 ")]),s("a-button",{staticStyle:{width:"45%","margin-left":"10%"},attrs:{type:"primary",size:"large"},on:{click:e.doReg}},[e._v(" 重设密码 ")])],1)],1)],1)],1):e._e()])},t=[],i=s("51fe"),a={name:"Forget",props:{isForm:{type:Boolean,default:!1}},data:function(){var e=this,r=function(r,s,o){""===s?o(new Error("请输入确认新密码")):s!==e.regForm.password?o(new Error("新密码和确认新密码不一致")):8!=String(s).length?o(new Error("请输入8位密码，包含字母、数字")):o()};return{codeStr:"获取验证码",time:0,regForm:{mobile:"",password:"",code:"",repassword:""},rules:{mobile:[{required:!0,message:"请输入联系人电话",trigger:"blur"},{min:11,max:11,message:"请输入正确联系人电话",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:8,max:8,message:"请输入8位密码，包含字母、数字",trigger:"blur"}],repassword:[{required:!0,message:"请输入确认密码",trigger:"blur"},{validator:r,trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"},{min:6,max:6,message:"请输入正确的验证码",trigger:"blur"}]}}},methods:{doReg:function(){var e=this;if(this.isForm)this.$refs.ruleForm.validate((function(r){if(!r)return!1;var s=Object.assign({},e.regForm);delete s.code,delete s.repassword,Object(i["a"])("/finance/userInfo/verifySmsCode",{mobile:s.mobile,smsCode:e.regForm.code,usageType:0}).then((function(r){1==r.content.smsCodeValid?e.reg(s):e.$message.error("验证码已过期")})).catch((function(r){return e.$message.error(r)}))}));else{if(!this.regForm.mobile||!/^1[3-9]{1}[0-9]{9}/.test(this.regForm.mobile))return void this.$message.error("请输入正确的联系人电话");if(!this.regForm.password||8!=String(this.regForm.password).length)return void this.$message.error("请输入8位密码，包含字母、数字");if(!this.regForm.repassword||8!=String(this.regForm.password).length||this.regForm.repassword!==this.regForm.password)return void this.$message.error("请输入8位正确的确认密码，包含字母、数字");if(!this.regForm.code||6!=String(this.regForm.code).length)return void this.$message.error("请输入正确的验证码");var r=Object.assign({},this.regForm);delete r.code,delete r.repassword,Object(i["a"])("/finance/userInfo/verifySmsCode",{mobile:r.mobile,smsCode:this.regForm.code,usageType:1}).then((function(s){1==s.content.smsCodeValid?e.reg(r):e.$message.error("验证码已过期")})).catch((function(r){return e.$message.error(r)}))}},reg:function(e){var r=this;this.$http.post("/finance/userInfo/forgetPassword",e).then((function(e){0==e.data.code?(r.$message.success("操作成功"),r.$emit("do-forget",r.regForm)):r.$message.success(e.data.msg)}))},sendSms:function(){var e=this;if(this.isForm){if(!this.regForm.mobile)return void this.$refs.mobile.onFieldBlur();if(this.regForm.mobile&&!/^1[3-9]{1}[0-9]{9}/.test(this.regForm.mobile))return void this.$refs.mobile.onFieldBlur()}else{if(!this.regForm.mobile)return void this.$message.error("请输入联系人电话");if(this.regForm.mobile&&!/^1[3-9]{1}[0-9]{9}/.test(this.regForm.mobile))return void this.$message.error("请输入正确联系人电话")}0==this.time&&Object(i["e"])("/finance/userInfo/sendSmsCode",{mobile:this.regForm.mobile,usageType:1}).then((function(r){e.time=60,e.codeStr=e.time+"s";var s=setInterval((function(){if(0==e.time)return e.codeStr="获取验证码",void clearInterval(s);e.time--,e.codeStr=e.time+"s"}),1e3)})).catch((function(r){e.$message.error(r)}))}}},n=a,l=(s("5b15"),s("2877")),m=Object(l["a"])(n,o,t,!1,null,"49a49a30",null);r["default"]=m.exports}}]);