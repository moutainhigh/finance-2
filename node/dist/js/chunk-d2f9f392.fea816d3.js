(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d2f9f392"],{"578a":function(o,t,e){"use strict";e.r(t);var i=function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",{staticClass:"login"},[o.isForm?o._e():e("div",{staticClass:"login-box"},[e("div",{staticClass:"l-title"},[e("div",[o._v("成都市科技金融智能服务平台")]),e("img",{staticClass:"close",attrs:{src:"/image/home/close.png"},on:{click:function(t){return o.$emit("close")}}})]),e("div",{staticClass:"l-input"},[e("div",[o._v("帐号")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model.number",value:o.loginForm.mobile,expression:"loginForm.mobile",modifiers:{number:!0}}],attrs:{type:"text",placeholder:"请输入手机号或统一社会信用代码"},domProps:{value:o.loginForm.mobile},on:{input:function(t){t.target.composing||o.$set(o.loginForm,"mobile",o._n(t.target.value))},blur:function(t){return o.$forceUpdate()}}})])]),e("div",{staticClass:"l-input"},[e("div",[o._v("密码")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model.trim",value:o.loginForm.password,expression:"loginForm.password",modifiers:{trim:!0}}],attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:o.loginForm.password},on:{input:function(t){t.target.composing||o.$set(o.loginForm,"password",t.target.value.trim())},blur:function(t){return o.$forceUpdate()}}})])]),e("div",{staticClass:"l-btn",on:{click:o.doLogin}},[o._v("登录")]),e("div",{staticClass:"reg",on:{click:function(t){return o.$emit("to-reg")}}},[o._v("没有账号？去注册")])]),o.isForm?e("div",{staticClass:"login-box"},[e("a-card",{staticStyle:{width:"504px","border-radius":"15px"},attrs:{title:"成都市科技金融智能服务平台"}},[e("a",{attrs:{slot:"extra",href:"#"},slot:"extra"},[e("img",{staticClass:"close",staticStyle:{padding:"0px",width:"27px"},attrs:{src:"/image/home/close.png"},on:{click:function(t){return o.$emit("close")}}})]),e("a-form-model",{ref:"ruleForm",attrs:{model:o.loginForm,rules:o.rules,"label-col":{span:4},"wrapper-col":{span:18}}},[e("a-form-model-item",{ref:"mobile",attrs:{label:"帐号",prop:"mobile"}},[e("a-input",{on:{blur:function(){o.$refs.mobile.onFieldBlur()}},model:{value:o.loginForm.mobile,callback:function(t){o.$set(o.loginForm,"mobile",t)},expression:"loginForm.mobile"}})],1),e("a-form-model-item",{ref:"password",attrs:{label:"密码",prop:"password"}},[e("a-input",{attrs:{type:"password"},on:{blur:function(){o.$refs.password.onFieldBlur()}},model:{value:o.loginForm.password,callback:function(t){o.$set(o.loginForm,"password",t)},expression:"loginForm.password"}})],1),e("a-form-model-item",{attrs:{"wrapper-col":{span:20,offset:2}}},[e("a-button",{attrs:{type:"primary",block:"",size:"large"},on:{click:o.doLogin}},[o._v(" 登录 ")]),e("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"link"},on:{click:function(t){return o.$emit("to-reg")}}},[o._v(" 没有帐号，去注册 ")]),e("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"link"},on:{click:function(t){return o.$emit("to-forget")}}},[o._v(" 忘记密码 ")])],1)],1)],1)],1):o._e()])},r=[],s=e("80a0"),n=e("51fe"),a=e("ae8c"),l={name:"Login",props:{isForm:{type:Boolean,default:!1}},data:function(){return{loginForm:{mobile:"",password:""},rules:{mobile:[{required:!0,message:"请输入手机号或统一社会信用代码",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:8,max:8,message:"请输入8位密码，包含字母、数字",trigger:"blur"}]}}},methods:Object(s["a"])(Object(s["a"])({},Object(a["b"])(["setUserInfo"])),{},{doLogin:function(){var o=this;if(this.isForm)this.$refs.ruleForm.validate((function(t){if(!t)return!1;11!=String(o.loginForm.mobile).length||/^1[3-9]{1}[0-9]{9}/.test(o.loginForm.mobile)?o.login(o.loginForm):o.$message.error("请输入手机号或统一社会信用代码")}));else{if(!this.loginForm.mobile||11==String(this.loginForm.mobile).length&&!/^1[3-9]{1}[0-9]{9}/.test(this.loginForm.mobile))return void this.$message.error("请输入手机号或统一社会信用代码");if(!this.loginForm.password||8!=String(this.loginForm.password).length)return void this.$message.error("请输入8位密码，包含字母、数字");this.login(this.loginForm)}},login:function(o){var t=this;this.$message.destroy(),this.$message.loading("登录中",0),this.$http.post("/finance/userInfo/login",o).then((function(o){t.$message.destroy(),0==o.data.code?(Object(n["d"])("cdjr_token",o.data.content.token,120),t.setUserInfo(o.data.content.userInfo),localStorage.setItem("userInfo",JSON.stringify(o.data.content.userInfo)),t.$message.loading("登录成功",1).then((function(){t.$emit("do-login",t.loginForm)}))):t.$message.error(o.data.msg)}))}})},m=l,c=(e("7790"),e("4023")),d=Object(c["a"])(m,i,r,!1,null,"ccc408ba",null);t["default"]=d.exports},"650a":function(o,t,e){},7790:function(o,t,e){"use strict";var i=e("650a"),r=e.n(i);r.a}}]);